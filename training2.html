<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    #consonants-container {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 5px;
    }

    .button-container {
    display: flex;
    }

    .half-page-button {
        flex: 1;
        margin: 10px;
        font-size: 30px;
        background-color: lightgray;
        cursor: pointer;
    }
    #choice {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 5px;
      
    }
    #info-area {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 5px;
      padding-bottom: 200px;
    }

    .tile {
      border: 1px solid black;
      padding: 1px;
      text-align: center;
      cursor: pointer;
      font-size: 35px;
      background-color: aqua;
    }
    .tile.selected {
      background-color: lightgray;
    }
    .first-item-tile{
        font-size: 20px;

    }
    .second-item-tile{
        font-size: 20px;
        font-weight: bold;

    }
    #playSound{
        font-size: 40px;
        border-radius: 10px;
        background-color: aqua;
        padding: 5px;
        padding-right: 10px;
        margin: 5px;
        margin-bottom: 10px;
    }

    #test-area{
        margin-bottom: 60px;
    }
    #showConsonants, #showVowels{
        flex: 1;
        margin: 10px;
        font-size: 30px;
        background-color: aqua;
        cursor: pointer;
        padding-left: 20px;
        padding-right: 20px;
    }
    #sort-learning-elements{
        border-radius: 10px;
        background-color: lightgray;
        padding: 5px;
        padding-right: 10px;
        margin: 5px;
        margin-bottom: 10px;

    }
  </style>
</head>
<body>
    <h1><b>1) Click Consonants or Vowels </b></h1> 
    <h1><b>2) Click the symbols you want to learn</b></h1>
    <h1><b>3) Click Learn or Test button</b></h1> 

    <div class="button-container">
        <button onclick="createLearningElements('consonants')" id="showConsonants">Consonants</button>
        <button onclick="createLearningElements('vowels')" id="showVowels">Vowels</button>
    </div>
    <button id="sort-learning-elements"><b>ðŸ”„abc</b></button>  <b class="sort-learning-elements">Toggle MOST COMMON / ALPHABETIC</b>
  
  <div id="consonants-container">
    <!-- consonants will be dynamically inserted here -->
  </div>

  <div class="button-container">
    <button id="mode2" class="half-page-button">Learn</button>
    <button id="mode1" class="half-page-button">Test</button>
  </div>

  <div id="test-area" style="display:none;">
    <h1><b>1) Click the sound button. </b></h1> 
    <h1><b>2) Click the corresponding symbol</b></h1>
    <h1><b>3) Repeat for next sound.</b></h1> 
    <h1><b>Click test button again to reset score</b></h1>
        <div >
            <button id="playSound" style="display: inline;">&#128266; </button>
            <p style="display: inline; font-size: 30px; font-weight: bold;" id="test-result"></p>
            <p style="display: inline; font-size: 30px;" id="score"></p>
        </div>
        
    
        <span id="choice"></span>
  </div>

  <div id="info-area" style="display:none;">
    <!-- selected consonant info will be dynamically inserted here -->
  </div>

  <script>
var prefixConsonants = "https://thaiarc.tu.ac.th/thai/";
  //updated innerbox sounds
    const consonants = [
  { letter: 'à¸', innerBox: 'g like in go', audio: prefixConsonants + 'csounds/k_kai.wav' },
  { letter: 'à¸‚', innerBox: 'kh like in sky', audio: prefixConsonants + "csounds/kh_khai.wav"  },
  { letter: 'à¸ƒ', innerBox: 'kh like in sky', audio: prefixConsonants + "csounds/kh_khuat.wav"  },
  { letter: 'à¸„', innerBox: 'kh like in Ketchup', audio: prefixConsonants + "csounds/kh_khwai.wav"  },
  { letter: 'à¸…', innerBox: 'kh like in sky', audio: prefixConsonants + "csounds/kh_khon.wav"  },
  { letter: 'à¸†', innerBox: 'kh like in sky', audio: prefixConsonants + "csounds/kh_rkng.wav"  },
  { letter: 'à¸‡', innerBox: 'ng like in sing', audio: prefixConsonants + "csounds/ng_ngu.wav"  },
  { letter: 'à¸ˆ', innerBox: 'j like in jump', audio: prefixConsonants + "csounds/j_jan.wav"  },
  { letter: 'à¸‰', innerBox: 'ch like in cheese', audio: prefixConsonants + "csounds/ch_ching.wav"  },
  { letter: 'à¸Š', innerBox: 'ch like in church', audio: prefixConsonants + "csounds/ch_chang.wav"  },
  { letter: 'à¸‹', innerBox: 's like in sun', audio: prefixConsonants + "csounds/s_so.wav"  },
  { letter: 'à¸Œ', innerBox: 'ch like in cheese', audio: prefixConsonants + "csounds/ch_cher.wav"  },
  { letter: 'à¸', innerBox: 'y like in yes', audio: prefixConsonants + "csounds/y_ying.wav"  },
  { letter: 'à¸Ž', innerBox: 'd like in dog', audio: prefixConsonants + "csounds/d_chada.wav"  },
  { letter: 'à¸', innerBox: 't like in top', audio: prefixConsonants + "csounds/t_patak.wav"  },
  { letter: 'à¸', innerBox: 'th like in three', audio: prefixConsonants + "csounds/th_than.wav"  },
  { letter: 'à¸‘', innerBox: 'h like in three', audio: prefixConsonants + "csounds/th_mntho.wav"  },
  { letter: 'à¸’', innerBox: 'th like in three', audio: prefixConsonants + "csounds/th_thao.wav"  },
  { letter: 'à¸“', innerBox: 'n like in nice', audio: prefixConsonants + "csounds/n_nen.wav"  },
  { letter: 'à¸”', innerBox: 'd like in dog', audio: prefixConsonants + "csounds/d_dek.wav"  },
  { letter: 'à¸•', innerBox: 't like in top', audio: prefixConsonants + "csounds/t_tao.wav"  },
  { letter: 'à¸–', innerBox: 'th like in three', audio: prefixConsonants + "csounds/th_thung.wav"  },
  { letter: 'à¸—', innerBox: 'th like in three', audio: prefixConsonants + "csounds/th_thahn.wav"  },
  { letter: 'à¸˜', innerBox: 'th like in three', audio: prefixConsonants + "csounds/th_thong.wav"  },
  { letter: 'à¸™', innerBox: 'n like in nice', audio: prefixConsonants + "csounds/n_nu.wav"  },
  { letter: 'à¸š', innerBox: 'b like in boy', audio: prefixConsonants + "csounds/b_baimai.wav"  },
  { letter: 'à¸›', innerBox: 'p like in pen', audio: prefixConsonants + "csounds/p_pla.wav"  },
  { letter: 'à¸œ', innerBox: 'ph like in phone', audio: prefixConsonants + "csounds/ph_phung.wav"  },
  { letter: 'à¸', innerBox: 'f like in fish', audio: prefixConsonants + "csounds/f_fa.wav"  },
  { letter: 'à¸ž', innerBox: 'ph like in phone', audio: prefixConsonants + "csounds/ph_phan.wav"  },
  { letter: 'à¸Ÿ', innerBox: 'f like in fish', audio: prefixConsonants + "csounds/f_fan.wav"  },
  { letter: 'à¸ ', innerBox: 'ph like in phone', audio: prefixConsonants + "csounds/ph_smpao.wav"  },
  { letter: 'à¸¡', innerBox: 'm like in man', audio: prefixConsonants + "csounds/m_ma.wav" },
  { letter: 'à¸¢', innerBox: 'y like in yes', audio: prefixConsonants + "csounds/y_yak.wav"  },
  { letter: 'à¸£', innerBox: 'r like in red', audio: prefixConsonants + "csounds/r_rua.wav"  },
  { letter: 'à¸¥', innerBox: 'l like in love', audio: prefixConsonants + "csounds/l_ling.wav" },
  { letter: 'à¸§', innerBox: 'w like in water', audio: prefixConsonants + "csounds/w_waen.wav"  },
  { letter: 'à¸¨', innerBox: 's like in sun', audio: prefixConsonants + "csounds/s_sala.wav"  },
  { letter: 'à¸©', innerBox: 's like in sun', audio: prefixConsonants + "csounds/s_rusi.wav" },
  { letter: 'à¸ª', innerBox: 's like in sun', audio: prefixConsonants + "csounds/s_sua.wav"  },
  { letter: 'à¸«', innerBox: 'h like in hot', audio: prefixConsonants + "csounds/h_hib.wav"  },
  { letter: 'à¸¬', innerBox: 'l like in love', audio: prefixConsonants + "csounds/l_chula.wav"  },
  { letter: 'à¸­', innerBox: '- ', audio: prefixConsonants + "csounds/a_ang.wav"  },
  { letter: 'à¸®', innerBox: 'h like in hot', audio: prefixConsonants + "csounds/h_nkhuk.wav" }
];
var prefixVowels = 'https://storage.googleapis.com/funtolearnthai/audio/';
const vowelsAll = [
  { vowel: 'â—Œà¸°', pronunciation: 'a',  audio: prefixVowels + 'vowels/1.mp3', sort: 'short' },
  { vowel: 'â—Œà¸²', pronunciation: 'aa',  audio: prefixVowels + 'vowels/2.mp3', sort: 'long' },
  { vowel: 'â—Œà¸´', pronunciation: 'i',  audio: prefixVowels + 'vowels/14.mp3', sort: 'short' },
  { vowel: 'â—Œà¸µ', pronunciation: 'ii',  audio: prefixVowels + 'vowels/15.mp3', sort: 'long' },
  { vowel: 'â—Œà¸¶', pronunciation: 'ue',  audio: prefixVowels + 'vowels/16.mp3', sort: 'short' },
  { vowel: 'â—Œà¸·', pronunciation: 'euu',  audio: prefixVowels + 'vowels/17.mp3', sort: 'long' },
  { vowel: 'â—Œà¸¸', pronunciation: 'u',  audio: prefixVowels + 'vowels/18.mp3', sort: 'short' },
  { vowel: 'â—Œà¸¹', pronunciation: 'uu',  audio: prefixVowels + 'vowels/19.mp3', sort: 'long' },
  { vowel: 'à¹€â—Œà¸°', pronunciation: 'e',  audio: prefixVowels + 'vowels/8.mp3', sort: 'short' },
  { vowel: 'à¹€â—Œ', pronunciation: 'ee',  audio: prefixVowels + 'vowels/9.mp3', sort: 'long' },
  { vowel: 'à¹â—Œà¸°', pronunciation: 'ae',  audio: prefixVowels + 'vowels/3.mp3', sort: 'short' },
  { vowel: 'à¹â—Œ', pronunciation: 'aae',  audio: prefixVowels + 'vowels/4.mp3', sort: 'long' },
  { vowel: 'à¹‚â—Œà¸°', pronunciation: 'o',  audio: prefixVowels + 'vowels/12.mp3', sort: 'short' },
  { vowel: 'à¹‚â—Œ', pronunciation: 'ooh',  audio: prefixVowels + 'vowels/13.mp3', sort: 'long' },
  { vowel: 'à¹€â—Œà¸²à¸°', pronunciation: 'aw',  audio: prefixVowels + 'vowels/5.mp3', sort: 'short' },
  { vowel: 'â—Œà¸­', pronunciation: 'aaw',  audio: prefixVowels + 'vowels/7.mp3', sort: 'long' },
  { vowel: 'à¹€â—Œà¸­à¸°', pronunciation: 'uh',  audio: prefixVowels + 'vowels/10.mp3', sort: 'short' },
  { vowel: 'à¹€â—Œà¸­', pronunciation: 'euh',  audio: prefixVowels + 'vowels/11.mp3', sort: 'long' },
  // Short diphthongs
  { vowel: 'à¹€â—Œ à¸µà¸¢à¸°', pronunciation: 'ia',  audio: prefixVowels + 'vowels/20.mp3', sort: 'shortdiphthong' },
  { vowel: 'à¹€â—Œ à¸·à¸­à¸°', pronunciation: 'uea',  audio: prefixVowels + 'vowels/22.mp3', sort: 'shortdiphthong' },
  { vowel: 'â—Œà¸±à¸§à¸°', pronunciation: 'ua',  audio: prefixVowels + 'vowels/63.mp3', sort: 'shortdiphthong' },
  { vowel: 'â—Œà¸³', pronunciation: 'am',  audio: prefixVowels + 'vowels/48.mp3', sort: 'shortdiphthong' },
  { vowel: 'à¹€â—Œà¸²', pronunciation: 'ao',  audio: prefixVowels + 'vowels/45.mp3', sort: 'shortdiphthong' },
  { vowel: 'à¹„â—Œ', pronunciation: 'ai',  audio: prefixVowels + 'vowels/26.mp3', sort: 'shortdiphthong' },
  { vowel: 'à¹ƒâ—Œ', pronunciation: 'ai',  audio: prefixVowels + 'vowels/27.mp3', sort: 'shortdiphthong' },

  // Long diphthongs
  { vowel: 'à¹€â—Œ à¸µà¸¢', pronunciation: 'iia',  audio: prefixVowels + 'vowels/21.mp3', sort: 'longdiphthong' },
  { vowel: 'à¹€â—Œ à¸·à¸­', pronunciation: 'uuea',  audio: prefixVowels + 'vowels/23.mp3', sort: 'longdiphthong' },
  { vowel: 'â—Œà¸±à¸§', pronunciation: 'uua',  audio: prefixVowels + 'vowels/25.mp3', sort: 'longdiphthong' }

];


const RGTS = [//checked
    { letter: 'à¸', rgts: 'ko kai' },
    { letter: 'à¸‚', rgts: 'kho khai' },
    { letter: 'à¸ƒ', rgts: 'kho khuat' },
    { letter: 'à¸„', rgts: 'kho khwai' },
    { letter: 'à¸…', rgts: 'kho khon' },
    { letter: 'à¸†', rgts: 'kho rakhang' },
    { letter: 'à¸‡', rgts: 'ngo ngu' },
    { letter: 'à¸ˆ', rgts: 'cho chan' },
    { letter: 'à¸‰', rgts: 'cho ching' },
    { letter: 'à¸Š', rgts: 'cho chang' },
    { letter: 'à¸‹', rgts: 'so so' },
    { letter: 'à¸Œ', rgts: 'cho choe' },
    { letter: 'à¸', rgts: 'yo ying' },
    { letter: 'à¸Ž', rgts: 'do chada' },
    { letter: 'à¸', rgts: 'to patak' },
    { letter: 'à¸', rgts: 'tho than' },
    { letter: 'à¸‘', rgts: 'tho montho' },
    { letter: 'à¸’', rgts: 'tho phu thao' },
    { letter: 'à¸“', rgts: 'no nen' },
    { letter: 'à¸”', rgts: 'do dek' },
    { letter: 'à¸•', rgts: 'to tao' },
    { letter: 'à¸–', rgts: 'tho thung' },
    { letter: 'à¸—', rgts: 'tho thahan' },
    { letter: 'à¸˜', rgts: 'tho thong' },
    { letter: 'à¸™', rgts: 'no nu' },
    { letter: 'à¸š', rgts: 'bo baimai' },
    { letter: 'à¸›', rgts: 'po pla' },
    { letter: 'à¸œ', rgts: 'pho phueng' },
    { letter: 'à¸', rgts: 'fo fa' },
    { letter: 'à¸ž', rgts: 'pho phan' },
    { letter: 'à¸Ÿ', rgts: 'fo fan' },
    { letter: 'à¸ ', rgts: 'pho samphao' },
    { letter: 'à¸¡', rgts: 'mo ma' },
    { letter: 'à¸¢', rgts: 'yo yak' },
    { letter: 'à¸£', rgts: 'ro ruea' },
    { letter: 'à¸¥', rgts: 'lo ling' },
    { letter: 'à¸§', rgts: 'wo waen' },
    { letter: 'à¸¨', rgts: 'so sala' },
    { letter: 'à¸©', rgts: 'so ruesi' },
    { letter: 'à¸ª', rgts: 'so suea' },
    { letter: 'à¸«', rgts: 'ho hip' },
    { letter: 'à¸¬', rgts: 'lo chula' },
    { letter: 'à¸­', rgts: 'o ang' },
    { letter: 'à¸®', rgts: 'ho nok huk' }
];

//verified and updated list with thai person and AI and sorted by sound. Only the first 20 are most used. after the sounds are rarely used
const most_common_consonants = ['à¸', 'à¸„', 'à¸¡', 'à¸™', 'à¸‡', 'à¸š', 'à¸›', 'à¸ž', 'à¸Ÿ', 'à¸”', 'à¸•', 'à¸—', 'à¸§', 'à¸¢', 'à¸ª', 'à¸ˆ', 'à¸Š', 'à¸£', 'à¸¥', 'à¸«', 'à¸­', 'à¸–','à¸‚', 'à¸˜', 'à¸‹', 'à¸“', 'à¸ ', 'à¸','à¸', 'à¸¬', 'à¸¨', 'à¸©', 'à¸Ž', 'à¸', 'à¸', 'à¸Œ', 'à¸®','à¸†', 'à¸‘', 'à¸’','à¸‰', 'à¸œ','à¸…','à¸ƒ'];


const mode1Button = document.querySelector('#mode1');
const mode2Button = document.querySelector('#mode2');

var selectedSymbols = [];

let isToggled = false; // state variable
document.getElementById('sort-learning-elements').addEventListener('click', () => {
    isToggled = !isToggled; // flip the state
    if(isToggled) {
        createLearningElements('consonants', 'sort');
    } else {
        createLearningElements('consonants');
    }
});

function createLearningElements(elementSort = 'consonants', abc){//consonants, vowels or tones

    selectedSymbols.splice(0, selectedSymbols.length); // Clear selectedSymbols array

        document.querySelector("#choice").innerHTML = '';
        document.querySelector("#test-result").innerHTML = '';
        document.querySelector("#score").innerHTML = '';
        document.querySelector('#info-area').innerHTML = ''; // clear previous info



        const container = document.querySelector('#consonants-container');
        container.innerHTML = '';
        let symbolArray;
  
        if (elementSort === "consonants") {
            document.getElementById('consonants-container').style.gridTemplateColumns = 'repeat(8, 1fr)';
            document.getElementById('choice').style.gridTemplateColumns = 'repeat(8, 1fr)';
            if(abc === 'sort'){
                symbolArray = consonants.slice();
                
                // Generate an object that holds the order for sorting
                const sortOrder = {};
                most_common_consonants.forEach((letter, index) => {
                sortOrder[letter] = index;
                });

                // Sort your consonants array
                symbolArray.sort((a, b) => sortOrder[a.letter] - sortOrder[b.letter]);
                //symbolArray = vowelsAll;
            }else{
                symbolArray = [];
                symbolArray = consonants;
            }
            document.querySelector('#sort-learning-elements').style.display = 'inline';
            document.querySelector('.sort-learning-elements').style.display = 'inline';

        } else if (elementSort === "vowels") {
            document.getElementById('consonants-container').style.gridTemplateColumns = 'repeat(4, 1fr)';
            document.getElementById('choice').style.gridTemplateColumns = 'repeat(4, 1fr)';
            symbolArray = vowelsAll;
            document.querySelector('#sort-learning-elements').style.display = 'none';
            document.querySelector('.sort-learning-elements').style.display = 'none';

        } else if (elementSort === "tones") {
            symbolArray = tones;
        } else {
            console.error('Invalid elementSort provided.');
            return;
        }

        symbolArray.forEach(c => {
            const tile = document.createElement('div');
            if (elementSort === "consonants") {
                tile.textContent = c.letter;
            }
            if (elementSort === "vowels") {
                tile.textContent = c.vowel;
            }
            if (elementSort === "tones") {
                tile.textContent = c.tone;
            }

            tile.className = 'tile';
            tile.onclick = function() {
                this.classList.toggle('selected');
                if (selectedSymbols.includes(c)) {
                selectedSymbols = selectedSymbols.filter(item => item !== c);
                } else {
                selectedSymbols.push(c);
                }
            };
            container.appendChild(tile);
        });

    };

mode1Button.onclick = function() {

    document.querySelector("#choice").innerHTML = '';
        document.querySelector("#test-result").innerHTML = '';
        document.querySelector("#score").innerHTML = '';
        document.querySelector('#info-area').innerHTML = ''; // clear previous info


  if (selectedSymbols.length === 0) {
    alert("Select letters first");
    return;
  }

  document.querySelector('#test-area').style.display = 'block';
  document.querySelector('#info-area').style.display = 'none';
  
  // Clear previous choices and result
  document.querySelector('#choice').innerHTML = '';
  document.querySelector('#test-result').textContent = '';
  
  // Generate tiles for each letter in the selected group
  let score = 0;
  let tries = 0; 

  selectedSymbols.forEach(c => {
    let firstSymbolKey = Object.keys(c)[0]; // get the name of the first key eg. letter: vowel: use c[firstSymbolKey] instead of c.letter

    const tile = document.createElement('div');
    tile.textContent = c[firstSymbolKey];
    tile.className = 'tile';
    tile.onclick = function() {

        tries++;  // Increase the tries counter
        if (c[firstSymbolKey] === testConsonant[firstSymbolKey]) {
            document.querySelector('#test-result').textContent = "Correct!";
            score++;
        } else {
            document.querySelector('#test-result').textContent = "Incorrect";
        }
        document.querySelector('#score').textContent = "Score: " + score + "/" + tries;
    };
    document.querySelector('#choice').appendChild(tile);
  });
  
//   var testConsonant;
//   document.querySelector('#playSound').onclick = function() {
//     testConsonant = selectedSymbols[Math.floor(Math.random() * selectedSymbols.length)];
//     new Audio(testConsonant.audio).play();
//   };
    var testConsonant;
    var selectedIndexes = []; // Track the selected indexes

    document.querySelector('#playSound').onclick = function() {
    var index;
    
    // Generate a unique random index
    do {
        index = Math.floor(Math.random() * selectedSymbols.length);
    } while (selectedIndexes.includes(index));

    selectedIndexes.push(index); // Add the selected index to the array
    
    // If all elements have been played, reset the array
    if (selectedIndexes.length === selectedSymbols.length) {
        selectedIndexes = [];
    }

    testConsonant = selectedSymbols[index];
    new Audio(testConsonant.audio).play();
    };



};


mode2Button.onclick = function() {

    

    if (selectedSymbols.length === 0) {
    alert("Select letters first");
    return;
  }


        document.querySelector("#choice").innerHTML = '';
        document.querySelector("#test-result").innerHTML = '';
        document.querySelector("#score").innerHTML = '';


  document.querySelector('#info-area').style.display = 'block';
  document.querySelector('#test-area').style.display = 'none';
  
  document.querySelector('#info-area').innerHTML = ''; // clear previous info

  selectedSymbols.forEach(c => {
    let firstSymbolKey = Object.keys(c)[0];  // get the name of the first key eg. letter: vowel: use c[firstSymbolKey] instead of c.letter
    let secondSymbolKey = Object.keys(c)[1];  // get the name of the first key eg. letter: vowel: use c[firstSymbolKey] instead of c.letter
    
    const tile = document.createElement('div');
    tile.textContent = c[firstSymbolKey];
    tile.className = 'tile';

    tile.onclick = function() {
      // Play the corresponding sound when the tile is clicked
      new Audio(c.audio).play();

      const info = document.createElement('p');
      info.className = 'first-item-tile';
      info.textContent = c[secondSymbolKey];
      const info2 = document.createElement('p');
      info2.className = 'second-item-tile';
      
      if (selectedSymbols.every(symbol => !('sort' in symbol))) {//check if not array vowels same as if(consonants)
        const mode2RGTS = RGTS.find(item => item.letter === c[firstSymbolKey]).rgts;
        info2.textContent = mode2RGTS;
        tile.appendChild(info2);
      }
      tile.appendChild(info);
      setTimeout(() => {
        tile.removeChild(info);
        tile.removeChild(info2);
      }, 3000);

    };
    document.querySelector('#info-area').appendChild(tile);
  });
};

createLearningElements();


</script>
</body>
</html>
